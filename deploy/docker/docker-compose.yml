version: '3.8'

services:
  crud-one:
    build:
      context: ../..
      dockerfile: deploy/docker/Dockerfile
    ports:
      - "3000:3000"
    environment:
      # Required: AI Provider
      - LLM_PROVIDER=${LLM_PROVIDER:-openai}
      - LLM_API_KEY=${LLM_API_KEY}
      - LLM_MODEL=${LLM_MODEL:-gpt-4}

      # Optional: Security
      - ADMIN_PASSWORD=${ADMIN_PASSWORD}
      - APP_PASSWORD=${APP_PASSWORD}

      # Server config
      - HOST=0.0.0.0
      - PORT=3000
      - WORKSPACE_DIR=/app/workspace

    volumes:
      # Persistent storage
      - pocketbase_data:/app/pocketbase/pb_data
      - workspace_data:/app/workspace

    restart: unless-stopped

volumes:
  pocketbase_data:
  workspace_data:
