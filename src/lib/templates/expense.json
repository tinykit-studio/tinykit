{
	"id": "expense",
	"name": "Expense Tracker",
	"description": "Track spending and income with persistent data",
	"preview": "lucide:wallet",
	"tags": [
		"finance",
		"intermediate",
		"data"
	],
	"kits": ["business", "freelance"],
	"frontend_code": "<script>\n\timport Icon from '@iconify/svelte'\n\timport content from '$content'\n\timport data from '$data'\n\n\tlet transactions = $state([])\n\tlet new_text = $state('')\n\tlet new_amount = $state('')\n\tlet loading = $state(true)\n\n\tdata.transactions.subscribe(items => {\n\t\t\ttransactions = [...items].sort((a, b) => \n\t\t\tnew Date(b.created || 0).getTime() - new Date(a.created || 0).getTime()\n\t\t)\n\t\tloading = false\n\t});\n\n\tlet balance = $derived.by(() =>\n\t\ttransactions.reduce((acc, t) => acc + t.amount, 0)\n\t)\n\n\tlet income = $derived.by(() =>\n\t\ttransactions.filter(t => t.amount > 0).reduce((acc, t) => acc + t.amount, 0)\n\t)\n\n\tlet expense = $derived.by(() =>\n\t\tMath.abs(transactions.filter(t => t.amount < 0).reduce((acc, t) => acc + t.amount, 0))\n\t)\n\n\tasync function add_transaction() {\n\t\tif (!new_text.trim() || !new_amount) return\n\t\tawait data.transactions.create({\n\t\t\ttext: new_text.trim(),\n\t\t\tamount: parseFloat(new_amount),\n\t\t\tcreated: new Date().toISOString()\n\t\t})\n\t\tnew_text = ''\n\t\tnew_amount = ''\n\t}\n\n\tfunction handle_amount_keydown(e) {\n\t\tif (e.key === 'Enter') {\n\t\t\te.preventDefault()\n\t\t\tadd_transaction()\n\t\t}\n\t}\n\n\tasync function delete_transaction(id) {\n\t\tawait data.transactions.delete(id)\n\t}\n\n\tfunction format_currency(amount) {\n\t\treturn new Intl.NumberFormat('en-US', {\n\t\t\tstyle: 'currency',\n\t\t\tcurrency: 'USD'\n\t\t}).format(amount)\n\t}\n\n\tfunction format_date(iso_string) {\n\t\tif (!iso_string) return ''\n\t\tconst d = new Date(iso_string)\n\t\treturn `${String(d.getMonth() + 1).padStart(2, '0')}/${String(d.getDate()).padStart(2, '0')}`\n\t}\n\n\tfunction download_csv() {\n\t\tconst headers = ['Date', 'Description', 'Amount']\n\t\tconst rows = transactions.map(t => [\n\t\t\tformat_date(t.created),\n\t\t\tt.text.replace(/,/g, ''),\n\t\t\tt.amount\n\t\t])\n\t\tconst csv = [headers, ...rows].map(row => row.join(',')).join('\\n')\n\t\tconst blob = new Blob([csv], { type: 'text/csv' })\n\t\tconst url = URL.createObjectURL(blob)\n\t\tconst a = document.createElement('a')\n\t\ta.href = url\n\t\ta.download = 'expenses.csv'\n\t\ta.click()\n\t\tURL.revokeObjectURL(url)\n\t}\n</script>\n\n<div class=\"page\">\n\t<div class=\"container\">\n\t\t<h1>{content.app_title}</h1>\n\n\t\t<div class=\"balance-card\">\n\t\t\t<p class=\"label\">{content.balance_label}</p>\n\t\t\t<h2 class:negative={balance < 0}>{format_currency(balance)}</h2>\n\t\t</div>\n\n\t\t<div class=\"summary\">\n\t\t\t<div class=\"income-card\">\n\t\t\t\t<p>{content.income_label}</p>\n\t\t\t\t<span>+{format_currency(income)}</span>\n\t\t\t</div>\n\t\t\t<div class=\"expense-card\">\n\t\t\t\t<p>{content.expense_label}</p>\n\t\t\t\t<span>-{format_currency(expense)}</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"form\">\n\t\t\t<h3>{content.add_transaction_title}</h3>\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tbind:value={new_text}\n\t\t\t\tplaceholder={content.description_placeholder}\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype=\"number\"\n\t\t\t\tbind:value={new_amount}\n\t\t\t\tplaceholder={content.amount_placeholder}\n\t\t\t\tonkeydown={handle_amount_keydown}\n\t\t\t/>\n\t\t\t<button onclick={add_transaction}>{content.add_button}</button>\n\t\t</div>\n\n\t\t<div class=\"history\">\n\t\t\t<div class=\"history-header\">\n\t\t\t\t<h3>{content.history_title}</h3>\n\t\t\t\t{#if transactions.length > 0}\n\t\t\t\t\t<button class=\"download-btn\" onclick={download_csv}><Icon icon=\"lucide:download\" size={16} /></button>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t\t{#if loading}\n\t\t\t\t<p class=\"empty\">{content.loading_message}</p>\n\t\t\t{:else if transactions.length === 0}\n\t\t\t\t<p class=\"empty\">{content.empty_state}</p>\n\t\t\t{:else}\n\t\t\t\t{#each transactions as t (t.id)}\n\t\t\t\t\t<div class=\"transaction\" class:income={t.amount > 0} class:expense={t.amount < 0}>\n\t\t\t\t\t\t<span>{t.text}</span>\n\t\t\t\t\t\t<div class=\"right\">\n\t\t\t\t\t\t\t{#if t.created}<span class=\"date\">{format_date(t.created)}</span>{/if}\n\t\t\t\t\t\t\t<span class=\"amount\">{t.amount > 0 ? '+' : ''}{format_currency(t.amount)}</span>\n\t\t\t\t\t\t\t<button onclick={() => delete_transaction(t.id)}><Icon icon=\"lucide:x\" size={16} /></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n\t<footer class=\"footer\">built with <a href=\"https://tinykit.studio\" target=\"_blank\">tinykit.studio</a></footer>\n</div>\n\n<style>\n\t.page {\n\t\tbackground: var(--page-background, #f5f5f5);\n\t\tmin-height: 100vh;\n\t\tpadding: 2rem;\n\t\tfont-family: var(--body-font, system-ui, sans-serif);\n\t}\n\n\t.container {\n\t\tmax-width: 420px;\n\t\tmargin: 0 auto;\n\t}\n\n\th1 {\n\t\ttext-align: center;\n\t\tcolor: var(--heading-text-color, #1a1a1a);\n\t\tmargin-bottom: 1.5rem;\n\t\tfont-size: 1.5rem;\n\t\tfont-weight: 600;\n\t}\n\n\th3 {\n\t\tcolor: var(--heading-text-color, #1a1a1a);\n\t\tmargin: 0 0 1rem 0;\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t}\n\n\t.balance-card {\n\t\tbackground: var(--card-background, #ffffff);\n\t\tpadding: 1.5rem;\n\t\tborder-radius: var(--card-radius, 12px);\n\t\ttext-align: center;\n\t\tmargin-bottom: 1rem;\n\t\tborder: 1px solid var(--border-color, #e5e5e5);\n\t}\n\n\t.balance-card .label {\n\t\tcolor: var(--secondary-text-color, #6b7280);\n\t\tmargin-bottom: 0.5rem;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.balance-card h2 {\n\t\tcolor: var(--positive-color, #10b981);\n\t\tfont-size: 2rem;\n\t\tmargin: 0;\n\t\tfont-weight: 700;\n\t}\n\n\t.balance-card h2.negative {\n\t\tcolor: var(--negative-color, #dc2626);\n\t}\n\n\t.summary {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 1fr;\n\t\tgap: 1rem;\n\t\tmargin-bottom: 1.5rem;\n\t}\n\n\t.summary > div {\n\t\tbackground: var(--card-background, #ffffff);\n\t\tpadding: 1rem;\n\t\tborder-radius: var(--card-radius, 12px);\n\t\ttext-align: center;\n\t\tborder: 1px solid var(--border-color, #e5e5e5);\n\t}\n\n\t.summary p {\n\t\tcolor: var(--secondary-text-color, #6b7280);\n\t\tmargin: 0 0 0.5rem 0;\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.income-card span {\n\t\tcolor: var(--positive-color, #10b981);\n\t\tfont-weight: 600;\n\t}\n\n\t.expense-card span {\n\t\tcolor: var(--negative-color, #dc2626);\n\t\tfont-weight: 600;\n\t}\n\n\t.form {\n\t\tbackground: var(--card-background, #ffffff);\n\t\tpadding: 1.5rem;\n\t\tborder-radius: var(--card-radius, 12px);\n\t\tmargin-bottom: 1.5rem;\n\t\tborder: 1px solid var(--border-color, #e5e5e5);\n\t}\n\n\t.form input {\n\t\twidth: 100%;\n\t\tpadding: 10px 14px;\n\t\tmargin-bottom: 10px;\n\t\tborder: 1px solid var(--border-color, #e5e5e5);\n\t\tborder-radius: var(--input-radius, 8px);\n\t\tbackground: var(--input-background, #ffffff);\n\t\tcolor: var(--body-text-color, #1a1a1a);\n\t\tfont-size: 0.95rem;\n\t}\n\n\t.form input:focus {\n\t\toutline: none;\n\t\tborder-color: var(--accent-color, #3b82f6);\n\t}\n\n\t.form input::placeholder {\n\t\tcolor: var(--placeholder-color, #9ca3af);\n\t}\n\n\t.form button {\n\t\twidth: 100%;\n\t\tpadding: 10px;\n\t\tbackground: var(--button-background, #3b82f6);\n\t\tcolor: #ffffff;\n\t\tborder: none;\n\t\tborder-radius: var(--button-radius, 8px);\n\t\tcursor: pointer;\n\t\tfont-weight: 500;\n\t\ttransition: opacity 0.15s;\n\t}\n\n\t.form button:hover {\n\t\topacity: 0.9;\n\t}\n\n\t.transaction {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tbackground: var(--card-background, #ffffff);\n\t\tpadding: 1rem;\n\t\tborder-radius: var(--item-radius, 8px);\n\t\tmargin-bottom: 8px;\n\t\tborder: 1px solid var(--border-color, #e5e5e5);\n\t\tborder-left: 3px solid transparent;\n\t}\n\n\t.transaction.income {\n\t\tborder-left-color: var(--positive-color, #10b981);\n\t}\n\n\t.transaction.expense {\n\t\tborder-left-color: var(--negative-color, #dc2626);\n\t}\n\n\t.transaction span {\n\t\tcolor: var(--body-text-color, #1a1a1a);\n\t}\n\n\t.transaction .right {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 10px;\n\t}\n\n\t.transaction .amount {\n\t\tfont-weight: 600;\n\t}\n\n\t.transaction.income .amount {\n\t\tcolor: var(--positive-color, #10b981);\n\t}\n\n\t.transaction.expense .amount {\n\t\tcolor: var(--negative-color, #dc2626);\n\t}\n\n\t.transaction button {\n\t\tbackground: transparent;\n\t\tborder: none;\n\t\tcolor: var(--secondary-text-color, #9ca3af);\n\t\tfont-size: 1.25rem;\n\t\tcursor: pointer;\n\t\tpadding: 0 4px;\n\t}\n\n\t.transaction button:hover {\n\t\tcolor: var(--negative-color, #dc2626);\n\t}\n\n\t.transaction .date {\n\t\tcolor: var(--secondary-text-color, #9ca3af);\n\t\tfont-size: 0.8rem;\n\t\tfont-weight: 400;\n\t}\n\n\t.history-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 1rem;\n\t}\n\n\t.history-header h3 {\n\t\tmargin: 0;\n\t}\n\n\t.download-btn {\n\t\tbackground: transparent;\n\t\tborder: none;\n\t\tcolor: var(--secondary-text-color, #9ca3af);\n\t\tcursor: pointer;\n\t\tpadding: 4px;\n\t\tborder-radius: 4px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.download-btn:hover {\n\t\tcolor: var(--body-text-color, #1a1a1a);\n\t\tbackground: var(--border-color, #e5e5e5);\n\t}\n\n\t.empty {\n\t\tcolor: var(--secondary-text-color, #6b7280);\n\t\ttext-align: center;\n\t\tpadding: 1rem;\n\t\tfont-size: 0.9rem;\n\t}\n\n\t.footer {\n\t\tmargin-top: 2rem;\n\t\tfont-size: 0.75rem;\n\t\tcolor: var(--secondary-text-color, #9ca3af);\n\t\ttext-align: center;\n\t}\n\n\t.footer a {\n\t\tcolor: inherit;\n\t\ttext-decoration: none;\n\t}\n\n\t.footer a:hover {\n\t\ttext-decoration: underline;\n\t}\n</style>",
	"design": [
		{
			"id": "body-font",
			"name": "Body Font",
			"css_var": "--body-font",
			"value": "system-ui, sans-serif",
			"type": "font",
			"description": "Main font for all text"
		},
		{
			"id": "page-background",
			"name": "Page Background",
			"css_var": "--page-background",
			"value": "#f5f5f5",
			"type": "color",
			"description": "Overall page background"
		},
		{
			"id": "card-background",
			"name": "Card Background",
			"css_var": "--card-background",
			"value": "#ffffff",
			"type": "color",
			"description": "Card and container background"
		},
		{
			"id": "border-color",
			"name": "Border Color",
			"css_var": "--border-color",
			"value": "#e5e5e5",
			"type": "color",
			"description": "Border and divider color"
		},
		{
			"id": "heading-text-color",
			"name": "Heading Text Color",
			"css_var": "--heading-text-color",
			"value": "#1a1a1a",
			"type": "color",
			"description": "Color for headings"
		},
		{
			"id": "body-text-color",
			"name": "Body Text Color",
			"css_var": "--body-text-color",
			"value": "#1a1a1a",
			"type": "color",
			"description": "Color for body text"
		},
		{
			"id": "secondary-text-color",
			"name": "Secondary Text Color",
			"css_var": "--secondary-text-color",
			"value": "#6b7280",
			"type": "color",
			"description": "Color for muted text"
		},
		{
			"id": "positive-color",
			"name": "Positive Color",
			"css_var": "--positive-color",
			"value": "#10b981",
			"type": "color",
			"description": "Color for income/positive amounts"
		},
		{
			"id": "negative-color",
			"name": "Negative Color",
			"css_var": "--negative-color",
			"value": "#dc2626",
			"type": "color",
			"description": "Color for expense/negative amounts"
		},
		{
			"id": "button-background",
			"name": "Button Background",
			"css_var": "--button-background",
			"value": "#3b82f6",
			"type": "color",
			"description": "Primary button color"
		},
		{
			"id": "card-radius",
			"name": "Card Radius",
			"css_var": "--card-radius",
			"value": "12px",
			"type": "radius",
			"description": "Roundness of cards"
		},
		{
			"id": "button-radius",
			"name": "Button Radius",
			"css_var": "--button-radius",
			"value": "8px",
			"type": "radius",
			"description": "Roundness of buttons"
		}
	],
	"content": [
		{
			"id": "app_title",
			"name": "App Title",
			"type": "text",
			"value": "Expense Tracker",
			"description": "Main heading"
		},
		{
			"id": "balance_label",
			"name": "Balance Label",
			"type": "text",
			"value": "Your Balance",
			"description": "Label above balance amount"
		},
		{
			"id": "income_label",
			"name": "Income Label",
			"type": "text",
			"value": "Income",
			"description": "Label for income card"
		},
		{
			"id": "expense_label",
			"name": "Expense Label",
			"type": "text",
			"value": "Expense",
			"description": "Label for expense card"
		},
		{
			"id": "add_transaction_title",
			"name": "Add Transaction Title",
			"type": "text",
			"value": "Add Transaction",
			"description": "Form section heading"
		},
		{
			"id": "description_placeholder",
			"name": "Description Placeholder",
			"type": "text",
			"value": "Description",
			"description": "Placeholder for description input"
		},
		{
			"id": "amount_placeholder",
			"name": "Amount Placeholder",
			"type": "text",
			"value": "Amount (use - for expense)",
			"description": "Placeholder for amount input"
		},
		{
			"id": "add_button",
			"name": "Add Button",
			"type": "text",
			"value": "Add Transaction",
			"description": "Add button label"
		},
		{
			"id": "history_title",
			"name": "History Title",
			"type": "text",
			"value": "History",
			"description": "Transaction history heading"
		},
		{
			"id": "loading_message",
			"name": "Loading Message",
			"type": "text",
			"value": "Loading...",
			"description": "Shown while loading"
		},
		{
			"id": "empty_state",
			"name": "Empty State",
			"type": "text",
			"value": "No transactions yet",
			"description": "Message when no transactions"
		}
	],
	"data": {
		"transactions": {
			"schema": [
				{
					"name": "id",
					"type": "text"
				},
				{
					"name": "text",
					"type": "text"
				},
				{
					"name": "amount",
					"type": "number"
				},
				{
					"name": "created",
					"type": "text"
				}
			],
			"records": [
				{
					"id": "f7n3q",
					"text": "Salary",
					"amount": 3500,
					"created": "2024-12-01T10:00:00.000Z"
				},
				{
					"id": "j2w8k",
					"text": "Rent",
					"amount": -1200,
					"created": "2024-12-02T14:30:00.000Z"
				},
				{
					"id": "v5m1p",
					"text": "Groceries",
					"amount": -150,
					"created": "2024-12-05T09:15:00.000Z"
				},
				{
					"id": "x9c4h",
					"text": "Freelance project",
					"amount": 800,
					"created": "2024-12-07T16:45:00.000Z"
				},
				{
					"id": "r6y2t",
					"text": "Utilities",
					"amount": -95,
					"created": "2024-12-09T11:20:00.000Z"
				}
			],
			"icon": "lucide:dollar-sign"
		}
	}
}
