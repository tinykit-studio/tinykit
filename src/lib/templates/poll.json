{
	"id": "poll",
	"name": "Live Poll",
	"description": "Realtime voting poll with live updates",
	"preview": "lucide:bar-chart-3",
	"tags": [
		"social",
		"intermediate",
		"realtime"
	],
	"kits": [
		"community",
		"launch",
		"feedback",
		"club",
		"event"
	],
	"frontend_code": "<script>\n\timport Icon from '@iconify/svelte'\n\timport content from '$content'\n\timport data from '$data'\n\n\tlet options = $state([])\n\tlet loading = $state(true)\n\tlet voted = $state(false)\n\tlet selected_id = $state(null)\n\n\t// Check if user has voted (stored in localStorage)\n\t$effect(() => {\n\t\tconst stored = localStorage.getItem('poll_voted')\n\t\tif (stored) {\n\t\t\tvoted = true\n\t\t\tselected_id = stored\n\t\t}\n\t})\n\n\t// Subscribe to realtime updates\n\tdata.options.subscribe(items => {\n\t\t\toptions = items.sort((a, b) => (a.order || 0) - (b.order || 0))\n\t\tloading = false\n\t});\n\n\tlet total_votes = $derived.by(() => \n\t\toptions.reduce((sum, opt) => sum + (opt.votes || 0), 0)\n\t)\n\n\tfunction get_percentage(votes) {\n\t\tif (total_votes === 0) return 0\n\t\treturn Math.round((votes / total_votes) * 100)\n\t}\n\n\tasync function vote(option_id) {\n\t\tif (voted) return\n\t\t\n\t\tconst option = options.find(o => o.id === option_id)\n\t\tif (!option) return\n\t\t\n\t\tawait data.options.update(option_id, { \n\t\t\tvotes: (option.votes || 0) + 1 \n\t\t})\n\t\t\n\t\tlocalStorage.setItem('poll_voted', option_id)\n\t\tvoted = true\n\t\tselected_id = option_id\n\t}\n\n\tfunction reset_vote() {\n\t\tlocalStorage.removeItem('poll_voted')\n\t\tvoted = false\n\t\tselected_id = null\n\t}\n</script>\n\n<div class=\"page\">\n\t<div class=\"container\">\n\t\t<div class=\"poll-header\">\n\t\t\t<Icon icon=\"lucide:bar-chart-2\" width={32} />\n\t\t\t<h1>{content.poll_question}</h1>\n\t\t\t{#if content.poll_description}\n\t\t\t\t<p class=\"description\">{content.poll_description}</p>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t{#if loading}\n\t\t\t<div class=\"loading\">\n\t\t\t\t<Icon icon=\"lucide:loader-2\" width={24} class=\"spin\" />\n\t\t\t\t<p>Loading poll...</p>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div class=\"options\">\n\t\t\t\t{#each options as option (option.id)}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"option\"\n\t\t\t\t\t\tclass:voted={voted}\n\t\t\t\t\t\tclass:selected={selected_id === option.id}\n\t\t\t\t\t\tonclick={() => vote(option.id)}\n\t\t\t\t\t\tdisabled={voted}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"option-content\">\n\t\t\t\t\t\t\t<span class=\"option-text\">{option.text}</span>\n\t\t\t\t\t\t\t{#if voted}\n\t\t\t\t\t\t\t\t<span class=\"option-stats\">\n\t\t\t\t\t\t\t\t\t<span class=\"votes\">{option.votes || 0} votes</span>\n\t\t\t\t\t\t\t\t\t<span class=\"percentage\">{get_percentage(option.votes || 0)}%</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{#if voted}\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"progress-bar\" \n\t\t\t\t\t\t\t\tclass:selected={selected_id === option.id}\n\t\t\t\t\t\t\t\tstyle=\"width: {get_percentage(option.votes || 0)}%\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{#if selected_id === option.id}\n\t\t\t\t\t\t\t<div class=\"check-mark\">\n\t\t\t\t\t\t\t\t<Icon icon=\"lucide:check\" width={16} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\n\t\t\t<div class=\"poll-footer\">\n\t\t\t\t<p class=\"total\">{total_votes} {content.total_votes_label}</p>\n\t\t\t\t{#if voted}\n\t\t\t\t\t<button class=\"reset-btn\" onclick={reset_vote}>\n\t\t\t\t\t\t{content.change_vote_text}\n\t\t\t\t\t</button>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"realtime-badge\">\n\t\t\t\t<span class=\"pulse\"></span>\n\t\t\t\t{content.realtime_label}\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\t<footer class=\"footer\">built with <a href=\"https://tinykit.studio\" target=\"_blank\">tinykit.studio</a></footer>\n</div>\n\n<style>\n\t.page {\n\t\tmin-height: 100vh;\n\t\tbackground: var(--page-background, #f8fafc);\n\t\tpadding: 2rem 1rem;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tfont-family: var(--body-font, system-ui, sans-serif);\n\t}\n\n\t.container {\n\t\twidth: 100%;\n\t\tmax-width: 500px;\n\t\tbackground: var(--card-background, #ffffff);\n\t\tborder-radius: var(--card-radius, 16px);\n\t\tpadding: 2rem;\n\t\tbox-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);\n\t\tborder: 1px solid var(--border-color, #e2e8f0);\n\t}\n\n\t.poll-header {\n\t\ttext-align: center;\n\t\tmargin-bottom: 2rem;\n\t\tcolor: var(--accent-color, #6366f1);\n\t}\n\n\t.poll-header h1 {\n\t\tcolor: var(--heading-text-color, #1e293b);\n\t\tfont-size: 1.5rem;\n\t\tfont-weight: 700;\n\t\tmargin: 1rem 0 0.5rem;\n\t}\n\n\t.description {\n\t\tcolor: var(--secondary-text-color, #64748b);\n\t\tfont-size: 0.95rem;\n\t\tmargin: 0;\n\t}\n\n\t.options {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12px;\n\t}\n\n\t.option {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\tpadding: 16px 20px;\n\t\tbackground: var(--option-background, #f8fafc);\n\t\tborder: 2px solid var(--option-border, #e2e8f0);\n\t\tborder-radius: var(--option-radius, 12px);\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease;\n\t\toverflow: hidden;\n\t\ttext-align: left;\n\t}\n\n\t.option:not(.voted):hover {\n\t\tborder-color: var(--accent-color, #6366f1);\n\t\tbackground: var(--option-hover, #f1f5f9);\n\t}\n\n\t.option.voted {\n\t\tcursor: default;\n\t\tbackground: var(--card-background, #ffffff);\n\t}\n\n\t.option.selected {\n\t\tborder-color: var(--accent-color, #6366f1);\n\t}\n\n\t.option-content {\n\t\tposition: relative;\n\t\tz-index: 1;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\n\t.option-text {\n\t\tcolor: var(--body-text-color, #334155);\n\t\tfont-weight: 500;\n\t}\n\n\t.option-stats {\n\t\tdisplay: flex;\n\t\tgap: 12px;\n\t\talign-items: center;\n\t}\n\n\t.votes {\n\t\tcolor: var(--secondary-text-color, #64748b);\n\t\tfont-size: 0.85rem;\n\t}\n\n\t.percentage {\n\t\tcolor: var(--heading-text-color, #1e293b);\n\t\tfont-weight: 600;\n\t\tfont-size: 0.9rem;\n\t}\n\n\t.progress-bar {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\theight: 100%;\n\t\tbackground: var(--progress-background, #e0e7ff);\n\t\tborder-radius: var(--option-radius, 12px);\n\t\ttransition: width 0.5s ease;\n\t}\n\n\t.progress-bar.selected {\n\t\tbackground: var(--progress-selected, #c7d2fe);\n\t}\n\n\t.check-mark {\n\t\tposition: absolute;\n\t\tright: 16px;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\twidth: 24px;\n\t\theight: 24px;\n\t\tbackground: var(--accent-color, #6366f1);\n\t\tcolor: #ffffff;\n\t\tborder-radius: 50%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tz-index: 2;\n\t}\n\n\t.poll-footer {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-top: 1.5rem;\n\t\tpadding-top: 1.5rem;\n\t\tborder-top: 1px solid var(--border-color, #e2e8f0);\n\t}\n\n\t.total {\n\t\tcolor: var(--secondary-text-color, #64748b);\n\t\tfont-size: 0.9rem;\n\t\tmargin: 0;\n\t}\n\n\t.reset-btn {\n\t\tbackground: none;\n\t\tborder: none;\n\t\tcolor: var(--accent-color, #6366f1);\n\t\tfont-size: 0.85rem;\n\t\tcursor: pointer;\n\t\ttext-decoration: underline;\n\t}\n\n\t.reset-btn:hover {\n\t\topacity: 0.8;\n\t}\n\n\t.realtime-badge {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8px;\n\t\tjustify-content: center;\n\t\tmargin-top: 1.5rem;\n\t\tcolor: var(--secondary-text-color, #64748b);\n\t\tfont-size: 0.8rem;\n\t}\n\n\t.pulse {\n\t\twidth: 8px;\n\t\theight: 8px;\n\t\tbackground: var(--pulse-color, #22c55e);\n\t\tborder-radius: 50%;\n\t\tanimation: pulse 2s ease-in-out infinite;\n\t}\n\n\t@keyframes pulse {\n\t\t0%, 100% { opacity: 1; transform: scale(1); }\n\t\t50% { opacity: 0.5; transform: scale(1.2); }\n\t}\n\n\t.loading {\n\t\ttext-align: center;\n\t\tpadding: 3rem;\n\t\tcolor: var(--secondary-text-color, #64748b);\n\t}\n\n\t.loading :global(.spin) {\n\t\tanimation: spin 1s linear infinite;\n\t}\n\n\t@keyframes spin {\n\t\tfrom { transform: rotate(0deg); }\n\t\tto { transform: rotate(360deg); }\n\t}\n\n\t.footer {\n\t\tmargin-top: 2rem;\n\t\tfont-size: 0.75rem;\n\t\tcolor: var(--secondary-text-color, #94a3b8);\n\t}\n\n\t.footer a {\n\t\tcolor: inherit;\n\t\ttext-decoration: none;\n\t}\n\n\t.footer a:hover {\n\t\ttext-decoration: underline;\n\t}\n</style>",
	"design": [
		{
			"id": "body-font",
			"name": "Font",
			"css_var": "--body-font",
			"value": "system-ui, sans-serif",
			"type": "font",
			"description": "Main font for all text"
		},
		{
			"id": "page-background",
			"name": "Page Background",
			"css_var": "--page-background",
			"value": "#f8fafc",
			"type": "color",
			"description": "Overall page background"
		},
		{
			"id": "card-background",
			"name": "Card Background",
			"css_var": "--card-background",
			"value": "#ffffff",
			"type": "color",
			"description": "Poll card background"
		},
		{
			"id": "heading-text-color",
			"name": "Heading Color",
			"css_var": "--heading-text-color",
			"value": "#1e293b",
			"type": "color",
			"description": "Color for headings"
		},
		{
			"id": "body-text-color",
			"name": "Body Text",
			"css_var": "--body-text-color",
			"value": "#334155",
			"type": "color",
			"description": "Color for body text"
		},
		{
			"id": "secondary-text-color",
			"name": "Secondary Text",
			"css_var": "--secondary-text-color",
			"value": "#64748b",
			"type": "color",
			"description": "Color for muted text"
		},
		{
			"id": "accent-color",
			"name": "Accent Color",
			"css_var": "--accent-color",
			"value": "#6366f1",
			"type": "color",
			"description": "Primary accent color"
		},
		{
			"id": "progress-background",
			"name": "Progress Bar",
			"css_var": "--progress-background",
			"value": "#e0e7ff",
			"type": "color",
			"description": "Vote progress bar color"
		},
		{
			"id": "progress-selected",
			"name": "Progress Selected",
			"css_var": "--progress-selected",
			"value": "#c7d2fe",
			"type": "color",
			"description": "Progress bar for selected option"
		},
		{
			"id": "option-border",
			"name": "Option Border",
			"css_var": "--option-border",
			"value": "#e2e8f0",
			"type": "color",
			"description": "Option button border"
		},
		{
			"id": "card-radius",
			"name": "Card Radius",
			"css_var": "--card-radius",
			"value": "16px",
			"type": "radius",
			"description": "Roundness of poll card"
		},
		{
			"id": "option-radius",
			"name": "Option Radius",
			"css_var": "--option-radius",
			"value": "12px",
			"type": "radius",
			"description": "Roundness of option buttons"
		}
	],
	"content": [
		{
			"id": "poll_question",
			"name": "Poll Question",
			"type": "text",
			"value": "What's your favorite programming language?",
			"description": "Main poll question"
		},
		{
			"id": "poll_description",
			"name": "Poll Description",
			"type": "text",
			"value": "Vote and see results update in realtime",
			"description": "Optional description below question"
		},
		{
			"id": "total_votes_label",
			"name": "Total Votes Label",
			"type": "text",
			"value": "total votes",
			"description": "Text after vote count"
		},
		{
			"id": "change_vote_text",
			"name": "Change Vote Text",
			"type": "text",
			"value": "Change my vote",
			"description": "Reset vote button text"
		},
		{
			"id": "realtime_label",
			"name": "Realtime Label",
			"type": "text",
			"value": "Updates live",
			"description": "Realtime indicator text"
		}
	],
	"data": {
		"options": {
			"schema": [
				{
					"name": "id",
					"type": "text"
				},
				{
					"name": "text",
					"type": "text"
				},
				{
					"name": "votes",
					"type": "number"
				},
				{
					"name": "order",
					"type": "number"
				}
			],
			"records": [
				{
					"id": "opt1",
					"text": "JavaScript",
					"votes": 42,
					"order": 0
				},
				{
					"id": "opt2",
					"text": "Python",
					"votes": 38,
					"order": 1
				},
				{
					"id": "opt3",
					"text": "Rust",
					"votes": 27,
					"order": 2
				},
				{
					"id": "opt4",
					"text": "Go",
					"votes": 19,
					"order": 3
				}
			],
			"icon": "lucide:box"
		}
	}
}
