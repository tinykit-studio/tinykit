{
	"id": "voice-memo",
	"name": "Voice Memos",
	"description": "Record, save and playback voice notes",
	"preview": "lucide:mic",
	"tags": [
		"productivity",
		"audio",
		"beginner"
	],
	"kits": ["daily"],
	"frontend_code": "<script>\n\timport Icon from '@iconify/svelte'\n\timport { fade } from 'svelte/transition'\n\timport content from '$content'\n\timport data from '$data'\n\timport { asset } from '$tinykit'\n\n\tlet memos = $state([])\n\tlet loading = $state(true)\n\tlet recording = $state(false)\n\tlet media_recorder = $state(null)\n\tlet audio_chunks = $state([])\n\tlet record_time = $state(0)\n\tlet timer_interval = $state(null)\n\tlet playing_id = $state(null)\n\tlet current_audio = $state(null)\n\n\tdata.memos.subscribe(items => {\n\t\tmemos = [...items].sort((a, b) => new Date(b.created_at) - new Date(a.created_at))\n\t\tloading = false\n\t})\n\n\tfunction format_time(seconds) {\n\t\tconst mins = Math.floor(seconds / 60)\n\t\tconst secs = Math.floor(seconds % 60)\n\t\treturn `${mins}:${secs.toString().padStart(2, '0')}`\n\t}\n\n\tfunction format_date(date_str) {\n\t\tconst date = new Date(date_str)\n\t\treturn date.toLocaleDateString(undefined, { month: 'short', day: 'numeric', hour: 'numeric', minute: '2-digit' })\n\t}\n\n\tasync function start_recording() {\n\t\ttry {\n\t\t\tconst stream = await navigator.mediaDevices.getUserMedia({ audio: true })\n\t\t\tmedia_recorder = new MediaRecorder(stream)\n\t\t\taudio_chunks = []\n\n\t\t\tmedia_recorder.ondataavailable = (e) => {\n\t\t\t\taudio_chunks.push(e.data)\n\t\t\t}\n\n\t\t\tmedia_recorder.onstop = async () => {\n\t\t\t\tconst audio_blob = new Blob(audio_chunks, { type: 'audio/webm' })\n\t\t\t\tconst audio_file = new File([audio_blob], `memo-${Date.now()}.webm`, { type: 'audio/webm' })\n\t\t\t\t\n\t\t\t\tawait data.memos.create({\n\t\t\t\t\tname: `Memo ${memos.length + 1}`,\n\t\t\t\t\taudio: audio_file,\n\t\t\t\t\tduration: record_time,\n\t\t\t\t\tcreated_at: new Date().toISOString()\n\t\t\t\t})\n\n\t\t\t\tstream.getTracks().forEach(track => track.stop())\n\t\t\t}\n\n\t\t\tmedia_recorder.start()\n\t\t\trecording = true\n\t\t\trecord_time = 0\n\t\t\ttimer_interval = setInterval(() => {\n\t\t\t\trecord_time += 1\n\t\t\t}, 1000)\n\t\t} catch (err) {\n\t\t\talert('Could not access microphone. Please allow microphone access.')\n\t\t}\n\t}\n\n\tfunction stop_recording() {\n\t\tif (media_recorder && recording) {\n\t\t\tmedia_recorder.stop()\n\t\t\trecording = false\n\t\t\tclearInterval(timer_interval)\n\t\t}\n\t}\n\n\tfunction play_memo(memo) {\n\t\tif (current_audio) {\n\t\t\tcurrent_audio.pause()\n\t\t\tcurrent_audio = null\n\t\t}\n\n\t\tif (playing_id === memo.id) {\n\t\t\tplaying_id = null\n\t\t\treturn\n\t\t}\n\n\t\tconst audio = new Audio(asset(memo.audio))\n\t\taudio.onended = () => {\n\t\t\tplaying_id = null\n\t\t\tcurrent_audio = null\n\t\t}\n\t\taudio.play()\n\t\tcurrent_audio = audio\n\t\tplaying_id = memo.id\n\t}\n\n\tasync function delete_memo(id) {\n\t\tif (playing_id === id) {\n\t\t\tcurrent_audio?.pause()\n\t\t\tplaying_id = null\n\t\t\tcurrent_audio = null\n\t\t}\n\t\tawait data.memos.delete(id)\n\t}\n\n\tasync function rename_memo(memo, new_name) {\n\t\tif (new_name.trim() && new_name !== memo.name) {\n\t\t\tawait data.memos.update(memo.id, { name: new_name.trim() })\n\t\t}\n\t}\n</script>\n\n<div class=\"app\">\n\t<header class=\"header\">\n\t\t<h1>{content.app_title}</h1>\n\t</header>\n\n\t<main class=\"main\">\n\t\t<!-- Record Button -->\n\t\t<div class=\"record-section\">\n\t\t\t{#if recording}\n\t\t\t\t<div class=\"recording-indicator\" transition:fade={{ duration: 100 }}>\n\t\t\t\t\t<span class=\"pulse\"></span>\n\t\t\t\t\t<span class=\"time\">{format_time(record_time)}</span>\n\t\t\t\t</div>\n\t\t\t\t<button class=\"record-btn recording\" onclick={stop_recording}>\n\t\t\t\t\t<Icon icon=\"lucide:square\" width={32} />\n\t\t\t\t</button>\n\t\t\t\t<p class=\"hint\">{content.stop_hint}</p>\n\t\t\t{:else}\n\t\t\t\t<button class=\"record-btn\" onclick={start_recording}>\n\t\t\t\t\t<Icon icon=\"lucide:mic\" width={32} />\n\t\t\t\t</button>\n\t\t\t\t<p class=\"hint\">{content.record_hint}</p>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<!-- Memos List -->\n\t\t<div class=\"memos-section\">\n\t\t\t<h2>{content.memos_title}</h2>\n\t\t\t{#if loading}\n\t\t\t\t<p class=\"empty\">{content.loading_text}</p>\n\t\t\t{:else if memos.length === 0}\n\t\t\t\t<p class=\"empty\">{content.empty_text}</p>\n\t\t\t{:else}\n\t\t\t\t<ul class=\"memo-list\">\n\t\t\t\t\t{#each memos as memo (memo.id)}\n\t\t\t\t\t\t<li class=\"memo-item\" transition:fade={{ duration: 100 }}>\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tclass=\"play-btn\" \n\t\t\t\t\t\t\t\tclass:playing={playing_id === memo.id}\n\t\t\t\t\t\t\t\tonclick={() => play_memo(memo)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon icon={playing_id === memo.id ? 'lucide:pause' : 'lucide:play'} width={20} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<div class=\"memo-info\">\n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\tclass=\"memo-name\"\n\t\t\t\t\t\t\t\t\tvalue={memo.name}\n\t\t\t\t\t\t\t\t\tonblur={(e) => rename_memo(memo, e.currentTarget.value)}\n\t\t\t\t\t\t\t\t\tonkeydown={(e) => e.key === 'Enter' && e.currentTarget.blur()}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span class=\"memo-meta\">\n\t\t\t\t\t\t\t\t\t{format_time(memo.duration)} Â· {format_date(memo.created_at)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button class=\"delete-btn\" onclick={() => delete_memo(memo.id)}>\n\t\t\t\t\t\t\t\t<Icon icon=\"lucide:trash-2\" width={18} />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t{/each}\n\t\t\t\t</ul>\n\t\t\t{/if}\n\t\t</div>\n\t</main>\n</div>\n\n<style>\n\t.app {\n\t\tmin-height: 100vh;\n\t\tbackground: var(--bg-color, #f8fafc);\n\t\tfont-family: var(--body-font, system-ui, sans-serif);\n\t\tcolor: var(--text-color, #1e293b);\n\t}\n\n\t.header {\n\t\tbackground: var(--header-bg, #ffffff);\n\t\tpadding: 1.25rem 1.5rem;\n\t\tborder-bottom: 1px solid var(--border-color, #e2e8f0);\n\t}\n\n\t.header h1 {\n\t\tmargin: 0;\n\t\tfont-size: 1.25rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--heading-color, #0f172a);\n\t}\n\n\t.main {\n\t\tmax-width: 500px;\n\t\tmargin: 0 auto;\n\t\tpadding: 2rem 1.5rem;\n\t}\n\n\t/* Record Section */\n\t.record-section {\n\t\ttext-align: center;\n\t\tmargin-bottom: 3rem;\n\t}\n\n\t.recording-indicator {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 0.75rem;\n\t\tmargin-bottom: 1rem;\n\t}\n\n\t.pulse {\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tbackground: var(--record-color, #ef4444);\n\t\tborder-radius: 50%;\n\t\tanimation: pulse 1s ease-in-out infinite;\n\t}\n\n\t@keyframes pulse {\n\t\t0%, 100% { opacity: 1; transform: scale(1); }\n\t\t50% { opacity: 0.5; transform: scale(0.9); }\n\t}\n\n\t.time {\n\t\tfont-size: 1.5rem;\n\t\tfont-weight: 600;\n\t\tfont-variant-numeric: tabular-nums;\n\t\tcolor: var(--heading-color, #0f172a);\n\t}\n\n\t.record-btn {\n\t\twidth: 80px;\n\t\theight: 80px;\n\t\tborder-radius: 50%;\n\t\tborder: none;\n\t\tbackground: var(--accent-color, #3b82f6);\n\t\tcolor: white;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin: 0 auto;\n\t\ttransition: all 0.2s ease;\n\t\tbox-shadow: 0 4px 14px var(--accent-shadow, rgba(59, 130, 246, 0.3));\n\t}\n\n\t.record-btn:hover {\n\t\ttransform: scale(1.05);\n\t}\n\n\t.record-btn:active {\n\t\ttransform: scale(0.98);\n\t}\n\n\t.record-btn.recording {\n\t\tbackground: var(--record-color, #ef4444);\n\t\tbox-shadow: 0 4px 14px rgba(239, 68, 68, 0.3);\n\t}\n\n\t.hint {\n\t\tmargin: 1rem 0 0 0;\n\t\tfont-size: 0.9rem;\n\t\tcolor: var(--muted-color, #64748b);\n\t}\n\n\t/* Memos Section */\n\t.memos-section h2 {\n\t\tfont-size: 0.85rem;\n\t\tfont-weight: 600;\n\t\ttext-transform: uppercase;\n\t\tletter-spacing: 0.05em;\n\t\tcolor: var(--muted-color, #64748b);\n\t\tmargin: 0 0 1rem 0;\n\t}\n\n\t.empty {\n\t\ttext-align: center;\n\t\tcolor: var(--muted-color, #64748b);\n\t\tpadding: 2rem;\n\t}\n\n\t.memo-list {\n\t\tlist-style: none;\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.75rem;\n\t}\n\n\t.memo-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 1rem;\n\t\tbackground: var(--card-bg, #ffffff);\n\t\tpadding: 1rem;\n\t\tborder-radius: var(--card-radius, 12px);\n\t\tbox-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n\t}\n\n\t.play-btn {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tborder-radius: 50%;\n\t\tborder: none;\n\t\tbackground: var(--accent-color, #3b82f6);\n\t\tcolor: white;\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tflex-shrink: 0;\n\t\ttransition: all 0.15s ease;\n\t}\n\n\t.play-btn:hover {\n\t\tfilter: brightness(1.1);\n\t}\n\n\t.play-btn.playing {\n\t\tbackground: var(--playing-color, #10b981);\n\t}\n\n\t.memo-info {\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\t.memo-name {\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tfont-size: 1rem;\n\t\tfont-weight: 500;\n\t\tcolor: var(--text-color, #1e293b);\n\t\tpadding: 0;\n\t\tmargin-bottom: 0.25rem;\n\t}\n\n\t.memo-name:focus {\n\t\toutline: none;\n\t\tcolor: var(--accent-color, #3b82f6);\n\t}\n\n\t.memo-meta {\n\t\tfont-size: 0.8rem;\n\t\tcolor: var(--muted-color, #64748b);\n\t}\n\n\t.delete-btn {\n\t\twidth: 36px;\n\t\theight: 36px;\n\t\tborder-radius: 8px;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tcolor: var(--muted-color, #64748b);\n\t\tcursor: pointer;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttransition: all 0.15s ease;\n\t}\n\n\t.delete-btn:hover {\n\t\tbackground: var(--delete-hover-bg, #fef2f2);\n\t\tcolor: var(--delete-color, #ef4444);\n\t}\n</style>",
	"design": [
		{
			"id": "bg-color",
			"name": "Background",
			"css_var": "--bg-color",
			"value": "#f8fafc",
			"type": "color",
			"description": "App background color"
		},
		{
			"id": "header-bg",
			"name": "Header Background",
			"css_var": "--header-bg",
			"value": "#ffffff",
			"type": "color",
			"description": "Header background color"
		},
		{
			"id": "card-bg",
			"name": "Card Background",
			"css_var": "--card-bg",
			"value": "#ffffff",
			"type": "color",
			"description": "Memo card background"
		},
		{
			"id": "accent-color",
			"name": "Accent Color",
			"css_var": "--accent-color",
			"value": "#3b82f6",
			"type": "color",
			"description": "Primary accent color"
		},
		{
			"id": "record-color",
			"name": "Recording Color",
			"css_var": "--record-color",
			"value": "#ef4444",
			"type": "color",
			"description": "Color when recording"
		},
		{
			"id": "playing-color",
			"name": "Playing Color",
			"css_var": "--playing-color",
			"value": "#10b981",
			"type": "color",
			"description": "Color when playing"
		},
		{
			"id": "heading-color",
			"name": "Heading Color",
			"css_var": "--heading-color",
			"value": "#0f172a",
			"type": "color",
			"description": "Heading text color"
		},
		{
			"id": "text-color",
			"name": "Text Color",
			"css_var": "--text-color",
			"value": "#1e293b",
			"type": "color",
			"description": "Main text color"
		},
		{
			"id": "muted-color",
			"name": "Muted Text",
			"css_var": "--muted-color",
			"value": "#64748b",
			"type": "color",
			"description": "Secondary text color"
		},
		{
			"id": "border-color",
			"name": "Border Color",
			"css_var": "--border-color",
			"value": "#e2e8f0",
			"type": "color",
			"description": "Border and divider color"
		},
		{
			"id": "body-font",
			"name": "Font",
			"css_var": "--body-font",
			"value": "Inter",
			"type": "font",
			"description": "Main font"
		},
		{
			"id": "card-radius",
			"name": "Card Radius",
			"css_var": "--card-radius",
			"value": "12px",
			"type": "radius",
			"description": "Roundness of cards"
		}
	],
	"content": [
		{
			"id": "app_title",
			"name": "App Title",
			"type": "text",
			"value": "Voice Memos",
			"description": "Title shown in header"
		},
		{
			"id": "record_hint",
			"name": "Record Hint",
			"type": "text",
			"value": "Tap to record",
			"description": "Hint text below record button"
		},
		{
			"id": "stop_hint",
			"name": "Stop Hint",
			"type": "text",
			"value": "Tap to stop",
			"description": "Hint text while recording"
		},
		{
			"id": "memos_title",
			"name": "Memos Section Title",
			"type": "text",
			"value": "Your Memos",
			"description": "Title for memos list section"
		},
		{
			"id": "empty_text",
			"name": "Empty State",
			"type": "text",
			"value": "No memos yet. Record your first one!",
			"description": "Message when no memos exist"
		},
		{
			"id": "loading_text",
			"name": "Loading Text",
			"type": "text",
			"value": "Loading...",
			"description": "Text shown while loading"
		}
	],
	"data": {
		"memos": {
			"schema": [
				{ "name": "name", "type": "text" },
				{ "name": "audio", "type": "file" },
				{ "name": "duration", "type": "number" },
				{ "name": "created_at", "type": "date" }
			],
			"records": [
				{ "id": "memo-1", "name": "Meeting notes", "duration": 127, "created_at": "2025-01-15T10:30:00Z" },
				{ "id": "memo-2", "name": "App idea", "duration": 45, "created_at": "2025-01-14T16:20:00Z" },
				{ "id": "memo-3", "name": "Grocery list", "duration": 23, "created_at": "2025-01-13T09:15:00Z" }
			],
			"icon": "lucide:mic"
		}
	}
}
