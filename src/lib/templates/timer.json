{
	"id": "timer",
	"name": "Pomodoro Timer",
	"description": "Focus timer with work/break cycles, session history & notifications",
	"preview": "lucide:timer",
	"tags": [
		"productivity",
		"intermediate",
		"data"
	],
	"kits": ["business", "daily"],
	"frontend_code": "<script>\n\timport content from '$content'\n\timport data from '$data'\n\timport Icon from '@iconify/svelte'\n\timport { slide } from 'svelte/transition'\n\n\tconst WORK_TIME = 25 * 60\n\tconst BREAK_TIME = 5 * 60\n\n\tlet time_left = $state(WORK_TIME)\n\tlet is_running = $state(false)\n\tlet is_work = $state(true)\n\tlet task_name = $state('My Task')\n\tlet interval = null\n\t\n\tlet sessions = $state([])\n\tlet loading = $state(true)\n\n\t// Subscribe to sessions\n\tdata.sessions.subscribe(items => {\n\t\tsessions = items\n\t\tloading = false\n\t})\n\n\t// Derived stats\n\tlet today_sessions = $derived.by(() => {\n\t\tconst startOfDay = new Date()\n\t\tstartOfDay.setHours(0, 0, 0, 0)\n\t\treturn sessions\n\t\t\t.filter(s => new Date(s.completed_at) >= startOfDay)\n\t\t\t.sort((a, b) => new Date(b.completed_at) - new Date(a.completed_at))\n\t})\n\n\tlet total_work_minutes = $derived.by(() => {\n\t\treturn Math.floor(today_sessions\n\t\t\t.filter(s => s.type === 'work')\n\t\t\t.reduce((acc, curr) => acc + curr.duration, 0) / 60)\n\t})\n\n\tfunction request_notification_permission() {\n\t\tif ('Notification' in window && Notification.permission === 'default') {\n\t\t\tNotification.requestPermission()\n\t\t}\n\t}\n\n\tfunction play_sound() {\n\t\tconst audio = new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3')\n\t\taudio.play().catch(e => console.log('Audio play failed', e))\n\t}\n\n\tfunction send_notification(title, body) {\n\t\tif ('Notification' in window && Notification.permission === 'granted') {\n\t\t\tnew Notification(title, { body, icon: '/favicon.png' })\n\t\t}\n\t}\n\n\tasync function complete_timer() {\n\t\tclearInterval(interval)\n\t\tis_running = false\n\t\t\n\t\tplay_sound()\n\t\t\n\t\tconst type = is_work ? 'work' : 'break'\n\t\tconst duration = is_work ? WORK_TIME : BREAK_TIME\n\t\t\n\t\t// Save to DB\n\t\tawait data.sessions.create({\n\t\t\ttask_name: is_work ? task_name : 'Break',\n\t\t\ttype,\n\t\t\tduration,\n\t\t\tcompleted_at: new Date().toISOString()\n\t\t})\n\n\t\tsend_notification(\n\t\t\tis_work ? content.work_complete_title : content.break_complete_title,\n\t\t\tis_work ? content.work_complete_body : content.break_complete_body\n\t\t)\n\n\t\tis_work = !is_work\n\t\ttime_left = is_work ? WORK_TIME : BREAK_TIME\n\t}\n\n\tfunction toggle_timer() {\n\t\trequest_notification_permission()\n\t\t\n\t\tif (is_running) {\n\t\t\tclearInterval(interval)\n\t\t\tis_running = false\n\t\t} else {\n\t\t\tis_running = true\n\t\t\tinterval = setInterval(() => {\n\t\t\t\tif (time_left > 0) {\n\t\t\t\t\ttime_left--\n\t\t\t\t} else {\n\t\t\t\t\tcomplete_timer()\n\t\t\t\t}\n\t\t\t}, 1000)\n\t\t}\n\t}\n\n\tfunction reset_timer() {\n\t\tclearInterval(interval)\n\t\tis_running = false\n\t\ttime_left = is_work ? WORK_TIME : BREAK_TIME\n\t}\n\n\tfunction format_time(seconds) {\n\t\tconst mins = Math.floor(seconds / 60)\n\t\tconst secs = seconds % 60\n\t\treturn `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\n\t}\n\n\tfunction format_history_time(isoString) {\n\t\treturn new Date(isoString).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n\t}\n\n\tlet progress = $derived.by(() => {\n\t\tconst total = is_work ? WORK_TIME : BREAK_TIME\n\t\treturn ((total - time_left) / total) * 100\n\t})\n</script>\n\n<div class=\"page\">\n\t<div class=\"main-column\">\n\t\t<div class=\"container\">\n\t\t\t<div class=\"header\">\n\t\t\t\t<input \n\t\t\t\t\ttype=\"text\" \n\t\t\t\t\tbind:value={task_name} \n\t\t\t\t\tclass=\"task-input\" \n\t\t\t\t\tplaceholder=\"What are you working on?\"\n\t\t\t\t/>\n\t\t\t\t<div class=\"edit-icon\">\n\t\t\t\t\t<Icon icon=\"lucide:edit-2\" width={16} />\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"mode-indicator\" class:break={!is_work}>\n\t\t\t\t{is_work ? content.work_label : content.break_label}\n\t\t\t</div>\n\n\t\t\t<div class=\"timer-circle\">\n\t\t\t\t<svg viewBox=\"0 0 100 100\">\n\t\t\t\t\t<circle class=\"bg\" cx=\"50\" cy=\"50\" r=\"45\" />\n\t\t\t\t\t<circle\n\t\t\t\t\t\tclass=\"progress\"\n\t\t\t\t\t\tclass:break={!is_work}\n\t\t\t\t\t\tcx=\"50\"\n\t\t\t\t\t\tcy=\"50\"\n\t\t\t\t\t\tr=\"45\"\n\t\t\t\t\t\tstroke-dasharray={2 * Math.PI * 45}\n\t\t\t\t\t\tstroke-dashoffset={2 * Math.PI * 45 * (1 - progress / 100)}\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t\t<div class=\"time\">{format_time(time_left)}</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"controls\">\n\t\t\t\t<button class=\"primary\" onclick={toggle_timer}>\n\t\t\t\t\t{is_running ? content.pause_button : content.start_button}\n\t\t\t\t</button>\n\t\t\t\t<button onclick={reset_timer}>{content.reset_button}</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"history-section\">\n\t\t\t<div class=\"history-header\">\n\t\t\t\t<h2>{content.history_title}</h2>\n\t\t\t\t<span class=\"total-time\">{total_work_minutes}m {content.focused_label}</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"history-list\">\n\t\t\t\t{#if loading}\n\t\t\t\t\t<div class=\"empty-state\">{content.loading_message}</div>\n\t\t\t\t{:else if today_sessions.length === 0}\n\t\t\t\t\t<div class=\"empty-state\">{content.no_sessions}</div>\n\t\t\t\t{:else}\n\t\t\t\t\t{#each today_sessions as session (session.id)}\n\t\t\t\t\t\t<div class=\"history-item\" transition:slide={{ duration: 200 }}>\n\t\t\t\t\t\t\t<div class=\"history-icon\" class:break={session.type === 'break'}>\n\t\t\t\t\t\t\t\t<Icon icon={session.type === 'work' ? 'lucide:check-circle-2' : 'lucide:coffee'} width={18} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"history-details\">\n\t\t\t\t\t\t\t\t<span class=\"history-task\">{session.task_name}</span>\n\t\t\t\t\t\t\t\t<span class=\"history-time\">{format_history_time(session.completed_at)}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"history-duration\">\n\t\t\t\t\t\t\t\t{Math.floor(session.duration / 60)}m\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<footer class=\"footer\">built with <a href=\"https://tinykit.studio\" target=\"_blank\">tinykit.studio</a></footer>\n</div>\n\n<style>\n\t.page {\n\t\tbackground: var(--page-background, #f5f5f5);\n\t\tmin-height: 100vh;\n\t\tpadding: 2rem;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tfont-family: var(--body-font, system-ui, sans-serif);\n\t}\n\n\t.main-column {\n\t\twidth: 100%;\n\t\tmax-width: 380px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 1.5rem;\n\t}\n\n\t.container {\n\t\ttext-align: center;\n\t\tbackground: var(--card-background, #ffffff);\n\t\tpadding: 2rem;\n\t\tborder-radius: var(--card-radius, 24px);\n\t\tbox-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);\n\t\tborder: 1px solid var(--border-color, #e5e5e5);\n\t}\n\n\t.header {\n\t\tposition: relative;\n\t\tmargin-bottom: 1.5rem;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.task-input {\n\t\tfont-size: 1.5rem;\n\t\tfont-weight: 600;\n\t\ttext-align: center;\n\t\tborder: none;\n\t\tbackground: transparent;\n\t\tcolor: var(--heading-text-color, #1a1a1a);\n\t\twidth: 100%;\n\t\tpadding: 0.25rem;\n\t\tborder-radius: 8px;\n\t\toutline: none;\n\t\ttransition: background 0.2s;\n\t}\n\n\t.task-input:hover, .task-input:focus {\n\t\tbackground: var(--input-hover-bg, #f3f4f6);\n\t}\n\n\t.edit-icon {\n\t\tposition: absolute;\n\t\tright: 0;\n\t\tcolor: var(--secondary-text-color, #9ca3af);\n\t\tpointer-events: none;\n\t\topacity: 0.5;\n\t}\n\n\t.mode-indicator {\n\t\tbackground: var(--work-color, #3b82f6);\n\t\tcolor: #ffffff;\n\t\tpadding: 6px 16px;\n\t\tborder-radius: var(--badge-radius, 20px);\n\t\tdisplay: inline-block;\n\t\tmargin-bottom: 2rem;\n\t\tfont-weight: 500;\n\t\tfont-size: 0.875rem;\n\t\ttransition: background 0.3s;\n\t}\n\n\t.mode-indicator.break {\n\t\tbackground: var(--break-color, #10b981);\n\t}\n\n\t.timer-circle {\n\t\tposition: relative;\n\t\twidth: 240px;\n\t\theight: 240px;\n\t\tmargin: 0 auto 2.5rem;\n\t}\n\n\t.timer-circle svg {\n\t\ttransform: rotate(-90deg);\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.timer-circle circle {\n\t\tfill: none;\n\t\tstroke-width: 5;\n\t}\n\n\t.timer-circle .bg {\n\t\tstroke: var(--track-color, #f3f4f6);\n\t}\n\n\t.timer-circle .progress {\n\t\tstroke: var(--work-color, #3b82f6);\n\t\tstroke-linecap: round;\n\t\ttransition: stroke-dashoffset 1s linear, stroke 0.3s;\n\t}\n\n\t.timer-circle .progress.break {\n\t\tstroke: var(--break-color, #10b981);\n\t}\n\n\t.time {\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t\tfont-size: 3.5rem;\n\t\tfont-weight: 700;\n\t\tcolor: var(--timer-text-color, #1a1a1a);\n\t\tfont-family: 'SF Mono', 'Consolas', monospace;\n\t\tletter-spacing: -2px;\n\t}\n\n\t.controls {\n\t\tdisplay: flex;\n\t\tgap: 1rem;\n\t\tjustify-content: center;\n\t}\n\n\tbutton {\n\t\tpadding: 14px 32px;\n\t\tborder: 1px solid transparent;\n\t\tborder-radius: var(--button-radius, 12px);\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcursor: pointer;\n\t\tbackground: var(--secondary-button-background, #f3f4f6);\n\t\tcolor: var(--body-text-color, #1a1a1a);\n\t\ttransition: all 0.2s;\n\t}\n\n\tbutton.primary {\n\t\tbackground: var(--button-background, #3b82f6);\n\t\tcolor: #ffffff;\n\t\tbox-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);\n\t}\n\n\tbutton:hover {\n\t\ttransform: translateY(-1px);\n\t\tfilter: brightness(1.05);\n\t}\n\n\tbutton:active {\n\t\ttransform: translateY(0);\n\t}\n\n\t/* History Section */\n\t.history-section {\n\t\tbackground: var(--card-background, #ffffff);\n\t\tborder-radius: var(--card-radius, 24px);\n\t\tpadding: 1.5rem;\n\t\tbox-shadow: 0 2px 10px rgba(0,0,0,0.02);\n\t\tborder: 1px solid var(--border-color, #e5e5e5);\n\t}\n\n\t.history-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 1rem;\n\t\tpadding-bottom: 0.75rem;\n\t\tborder-bottom: 1px solid var(--border-color, #f3f4f6);\n\t}\n\n\t.history-header h2 {\n\t\tfont-size: 1rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--heading-text-color, #1a1a1a);\n\t\tmargin: 0;\n\t}\n\n\t.total-time {\n\t\tfont-size: 0.875rem;\n\t\tcolor: var(--secondary-text-color, #6b7280);\n\t\tfont-weight: 500;\n\t}\n\n\t.history-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 0.75rem;\n\t}\n\n\t.history-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 0.75rem;\n\t\tpadding: 0.5rem;\n\t\tborder-radius: 8px;\n\t\ttransition: background 0.2s;\n\t}\n\n\t.history-item:hover {\n\t\tbackground: var(--item-hover-bg, #f9fafb);\n\t}\n\n\t.history-icon {\n\t\twidth: 32px;\n\t\theight: 32px;\n\t\tborder-radius: 50%;\n\t\tbackground: var(--work-light-color, #eff6ff);\n\t\tcolor: var(--work-color, #3b82f6);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tflex-shrink: 0;\n\t}\n\n\t.history-icon.break {\n\t\tbackground: var(--break-light-color, #ecfdf5);\n\t\tcolor: var(--break-color, #10b981);\n\t}\n\n\t.history-details {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 2px;\n\t\toverflow: hidden;\n\t}\n\n\t.history-task {\n\t\tfont-weight: 500;\n\t\tfont-size: 0.95rem;\n\t\tcolor: var(--body-text-color, #1a1a1a);\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\n\t.history-time {\n\t\tfont-size: 0.75rem;\n\t\tcolor: var(--secondary-text-color, #9ca3af);\n\t}\n\n\t.history-duration {\n\t\tfont-size: 0.875rem;\n\t\tfont-weight: 600;\n\t\tcolor: var(--secondary-text-color, #6b7280);\n\t}\n\n\t.empty-state {\n\t\ttext-align: center;\n\t\tpadding: 2rem 0;\n\t\tcolor: var(--secondary-text-color, #9ca3af);\n\t\tfont-size: 0.875rem;\n\t}\n\n\t.footer {\n\t\tmargin-top: auto;\n\t\tpadding-top: 2rem;\n\t\tfont-size: 0.75rem;\n\t\tcolor: var(--secondary-text-color, #9ca3af);\n\t}\n\n\t.footer a {\n\t\tcolor: inherit;\n\t\ttext-decoration: none;\n\t}\n\n\t.footer a:hover {\n\t\ttext-decoration: underline;\n\t}\n</style>",
	"design": [
		{
			"id": "body-font",
			"name": "Body Font",
			"css_var": "--body-font",
			"value": "system-ui, sans-serif",
			"type": "font",
			"description": "Main font for all text"
		},
		{
			"id": "page-background",
			"name": "Page Background",
			"css_var": "--page-background",
			"value": "#f5f5f5",
			"type": "color",
			"description": "Overall page background"
		},
		{
			"id": "card-background",
			"name": "Card Background",
			"css_var": "--card-background",
			"value": "#ffffff",
			"type": "color",
			"description": "Container background"
		},
		{
			"id": "border-color",
			"name": "Border Color",
			"css_var": "--border-color",
			"value": "#e5e5e5",
			"type": "color",
			"description": "Border and divider color"
		},
		{
			"id": "heading-text-color",
			"name": "Heading Text Color",
			"css_var": "--heading-text-color",
			"value": "#1a1a1a",
			"type": "color",
			"description": "Color for headings"
		},
		{
			"id": "timer-text-color",
			"name": "Timer Text Color",
			"css_var": "--timer-text-color",
			"value": "#1a1a1a",
			"type": "color",
			"description": "Color for timer numbers"
		},
		{
			"id": "work-color",
			"name": "Work Color",
			"css_var": "--work-color",
			"value": "#3b82f6",
			"type": "color",
			"description": "Color for work mode"
		},
		{
			"id": "break-color",
			"name": "Break Color",
			"css_var": "--break-color",
			"value": "#10b981",
			"type": "color",
			"description": "Color for break mode"
		},
		{
			"id": "track-color",
			"name": "Track Color",
			"css_var": "--track-color",
			"value": "#f3f4f6",
			"type": "color",
			"description": "Background track of progress ring"
		},
		{
			"id": "button-background",
			"name": "Button Background",
			"css_var": "--button-background",
			"value": "#3b82f6",
			"type": "color",
			"description": "Primary button color"
		},
		{
			"id": "button-radius",
			"name": "Button Radius",
			"css_var": "--button-radius",
			"value": "12px",
			"type": "radius",
			"description": "Roundness of buttons"
		},
		{
			"id": "card-radius",
			"name": "Card Radius",
			"css_var": "--card-radius",
			"value": "24px",
			"type": "radius",
			"description": "Roundness of cards"
		},
		{
			"id": "work-light-color",
			"name": "Work Icon Background",
			"css_var": "--work-light-color",
			"value": "#eff6ff",
			"type": "color",
			"description": "Background for work icon in history"
		},
		{
			"id": "break-light-color",
			"name": "Break Icon Background",
			"css_var": "--break-light-color",
			"value": "#ecfdf5",
			"type": "color",
			"description": "Background for break icon in history"
		},
		{
			"id": "input-hover-bg",
			"name": "Input Hover Background",
			"css_var": "--input-hover-bg",
			"value": "#f3f4f6",
			"type": "color",
			"description": "Background when hovering task input"
		},
		{
			"id": "item-hover-bg",
			"name": "Item Hover Background",
			"css_var": "--item-hover-bg",
			"value": "#f9fafb",
			"type": "color",
			"description": "Background when hovering history items"
		}
	],
	"content": [
		{
			"id": "work_label",
			"name": "Work Label",
			"type": "text",
			"value": "Work Time",
			"description": "Label for work mode"
		},
		{
			"id": "break_label",
			"name": "Break Label",
			"type": "text",
			"value": "Break Time",
			"description": "Label for break mode"
		},
		{
			"id": "start_button",
			"name": "Start Button",
			"type": "text",
			"value": "Start",
			"description": "Start button label"
		},
		{
			"id": "pause_button",
			"name": "Pause Button",
			"type": "text",
			"value": "Pause",
			"description": "Pause button label"
		},
		{
			"id": "reset_button",
			"name": "Reset Button",
			"type": "text",
			"value": "Reset",
			"description": "Reset button label"
		},
		{
			"id": "history_title",
			"name": "History Title",
			"type": "text",
			"value": "Today's Activity",
			"description": "Title for history section"
		},
		{
			"id": "focused_label",
			"name": "Focused Label",
			"type": "text",
			"value": "focused",
			"description": "Label after total minutes"
		},
		{
			"id": "loading_message",
			"name": "Loading Message",
			"type": "text",
			"value": "Loading history...",
			"description": "Message while loading"
		},
		{
			"id": "no_sessions",
			"name": "No Sessions",
			"type": "text",
			"value": "No sessions completed today",
			"description": "Empty state message"
		},
		{
			"id": "work_complete_title",
			"name": "Work Complete Title",
			"type": "text",
			"value": "Work Session Complete!",
			"description": "Notification title when work ends"
		},
		{
			"id": "work_complete_body",
			"name": "Work Complete Body",
			"type": "text",
			"value": "Time to take a break.",
			"description": "Notification body when work ends"
		},
		{
			"id": "break_complete_title",
			"name": "Break Complete Title",
			"type": "text",
			"value": "Break Over!",
			"description": "Notification title when break ends"
		},
		{
			"id": "break_complete_body",
			"name": "Break Complete Body",
			"type": "text",
			"value": "Time to get back to work.",
			"description": "Notification body when break ends"
		}
	],
	"data": {
		"sessions": {
			"schema": [
				{ "name": "id", "type": "id" },
				{ "name": "task_name", "type": "text" },
				{ "name": "type", "type": "text" },
				{ "name": "duration", "type": "number" },
				{ "name": "completed_at", "type": "date" }
			],
			"records": [],
			"icon": "lucide:timer"
		}
	}
}
